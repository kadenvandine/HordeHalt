[gd_scene load_steps=12 format=3 uid="uid://74k1c1nsv2ww"]

[ext_resource type="Script" uid="uid://kws6ugf1o63" path="res://flame_vfx.gd" id="1_x8boj"]
[ext_resource type="Script" uid="uid://cyheadoxdp5g" path="res://FlameResidual.gd" id="2_rejde"]

[sub_resource type="CylinderMesh" id="CylinderMesh_rejde"]
top_radius = 3.0
bottom_radius = 0.001
height = 7.0

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_rejde"]
points = PackedVector3Array(-3, 3.5, -0.00058698654, -2.9859045, 3.5, -0.29424405, -2.3891933, 2.099452, -0.23551273, -2.4003522, 2.099452, -0.00058698654, -2.3891933, 2.099452, 0.23492599, -2.9859045, 3.5, 0.2936573, -2.9424431, 3.5, -0.58555174, -2.3545418, 2.099452, -0.46867633, -0.59847283, -2.100137, -0.059318304, -1.201057, -0.700274, -0.00058698654, -2.3545418, 2.099452, 0.46808958, -0.59847283, -2.100137, 0.058731794, -2.9424431, 3.5, 0.5849652, -2.8713782, 3.5, -0.87098646, -1.1493733, -0.700274, -0.34886432, -0.589663, -2.100137, -0.1174624, -0.0011742115, -3.5, -0.0011742115, -0.0011742115, -3.5, 0.0005877018, -2.8713782, 3.5, 0.8703997, -0.589663, -2.100137, 0.11687589, -1.1493733, -0.700274, 0.34827757, -2.7721221, 3.5, -1.1481987, -1.6638604, 0.6995888, -0.68950653, -0.55559874, -2.100137, -0.23022676, -0.28367233, -2.100137, -0.53034425, -0.23022676, -2.100137, -0.55559874, -0.34886432, -0.700274, -1.1493733, -0.1174624, -2.100137, -0.589663, -0.059318304, -2.100137, -0.59847283, -0.00058698654, -0.700274, -1.201057, 0.0005877018, -3.5, -0.0011742115, -0.53034425, -2.100137, -0.28367233, -1.9962802, 2.099452, -1.33379, -1.8559122, 2.099452, -1.5229051, -1.6973374, 2.099452, -1.6973374, -1.5229051, 2.099452, -1.8559122, -1.33379, 2.099452, -1.9962802, -0.53034425, -2.100137, 0.28308558, -0.55559874, -2.100137, 0.22964, 0.0005877018, -3.5, 0.0005877018, -0.00058698654, -0.700274, 1.2004704, -0.059318304, -2.100137, 0.5978861, -0.1174624, -2.100137, 0.5890763, -0.34886432, -0.700274, 1.1487865, -0.23022676, -2.100137, 0.555012, -0.28367233, -2.100137, 0.5297575, -1.666797, 3.5, 2.4943233, -1.0007828, 0.6995888, 1.4964767, -1.5229051, 2.099452, 1.8553257, -1.6973374, 2.099452, 1.6967506, -1.8559122, 2.099452, 1.5223184, -1.9962802, 2.099452, 1.3332033, -1.6638604, 0.6995888, 0.6889198, -2.7721221, 3.5, 1.1476121, -2.6458497, 3.5, -1.414252, -2.117267, 2.099452, -1.1317539, -1.1317539, 2.099452, -2.117267, -0.68950653, 0.6995888, -1.6638604, -0.87098646, 3.5, -2.8713782, -0.46867633, 2.099452, -2.3545418, -0.23551273, 2.099452, -2.3891933, 0.058731794, -2.100137, -0.59847283, -0.00058698654, 2.099452, -2.4003522, 0.23492599, 2.099452, -2.3891933, 0.5297575, -2.100137, -0.28367233, 0.555012, -2.100137, -0.23022676, 1.1487865, -0.700274, -0.34886432, 0.5890763, -2.100137, -0.1174624, 0.5978861, -2.100137, -0.059318304, 1.2004704, -0.700274, -0.00058698654, 0.11687589, -2.100137, -0.589663, 0.34827757, -0.700274, -1.1493733, 0.22964, -2.100137, -0.55559874, 0.28308558, -2.100137, -0.53034425, 1.3332033, 2.099452, -1.9962802, 1.5223184, 2.099452, -1.8559122, 1.6967506, 2.099452, -1.6973374, 1.8553257, 2.099452, -1.5229051, 1.4964767, 0.6995888, -1.0007828, 2.4943233, 3.5, -1.666797, -2.4949098, 3.5, -1.666797, -2.319303, 3.5, -1.9034846, -2.1213782, 3.5, -2.1213782, -1.9034846, 3.5, -2.319303, -1.666797, 3.5, -2.4949098, -2.117267, 2.099452, 1.1311674, 0.28308558, -2.100137, 0.5297575, 0.22964, -2.100137, 0.555012, 0.34827757, -0.700274, 1.1487865, 0.11687589, -2.100137, 0.5890763, 0.058731794, -2.100137, 0.5978861, 0.5978861, -2.100137, 0.058731794, 0.5890763, -2.100137, 0.11687589, 1.1487865, -0.700274, 0.34827757, 0.555012, -2.100137, 0.22964, 0.5297575, -2.100137, 0.28308558, 2.4943233, 3.5, 1.6662102, 1.4964767, 0.6995888, 1.000196, 1.8553257, 2.099452, 1.5223184, 1.6967506, 2.099452, 1.6967506, 1.5223184, 2.099452, 1.8553257, 1.000196, 0.6995888, 1.4964767, 1.6662102, 3.5, 2.4943233, 0.23492599, 2.099452, 2.3886065, -0.00058698654, 2.099452, 2.3997655, -0.23551273, 2.099452, 2.3886065, -0.46867633, 2.099452, 2.3539553, -0.87098646, 3.5, 2.8707914, -0.68950653, 0.6995888, 1.6632738, -1.1317539, 2.099452, 2.1166801, -1.414252, 3.5, 2.6452627, -1.9034846, 3.5, 2.318716, -2.1213782, 3.5, 2.1207914, -2.319303, 3.5, 1.9028978, -2.4949098, 3.5, 1.6662102, -2.6458497, 3.5, 1.4136653, -1.414252, 3.5, -2.6458497, -1.1481987, 3.5, -2.7721221, -0.58555174, 3.5, -2.9424431, -0.29424405, 3.5, -2.9859045, -0.00058698654, 3.5, -3, 0.46808958, 2.099452, -2.3545418, 0.2936573, 3.5, -2.9859045, 2.1166801, 2.099452, -1.1317539, 1.6632738, 0.6995888, -0.68950653, 2.8707914, 3.5, -0.87098646, 2.3539553, 2.099452, -0.46867633, 2.3886065, 2.099452, -0.23551273, 2.3997655, 2.099452, -0.00058698654, 2.3886065, 2.099452, 0.23492599, 0.8703997, 3.5, -2.8713782, 0.6889198, 0.6995888, -1.6638604, 1.1311674, 2.099452, -2.117267, 1.6662102, 3.5, -2.4949098, 1.9028978, 3.5, -2.319303, 2.1207914, 3.5, -2.1213782, 2.318716, 3.5, -1.9034846, 2.6452627, 3.5, -1.414252, 1.1311674, 2.099452, 2.1166801, 0.6889198, 0.6995888, 1.6632738, 0.8703997, 3.5, 2.8707914, 0.46808958, 2.099452, 2.3539553, 2.3539553, 2.099452, 0.46808958, 2.8707914, 3.5, 0.8703997, 1.6632738, 0.6995888, 0.6889198, 2.1166801, 2.099452, 1.1311674, 2.6452627, 3.5, 1.4136653, 2.318716, 3.5, 1.9028978, 2.1207914, 3.5, 2.1207914, 1.9028978, 3.5, 2.318716, 1.4136653, 3.5, 2.6452627, 0.2936573, 3.5, 2.9853177, -0.00058698654, 3.5, 2.9994135, -0.29424405, 3.5, 2.9853177, -0.58555174, 3.5, 2.9418564, -1.1481987, 3.5, 2.7715354, 0.5849652, 3.5, -2.9424431, 2.7715354, 3.5, -1.1481987, 2.9418564, 3.5, -0.58555174, 2.9853177, 3.5, -0.29424405, 2.9994135, 3.5, -0.00058698654, 2.9853177, 3.5, 0.2936573, 1.1476121, 3.5, -2.7721221, 1.4136653, 3.5, -2.6458497, 1.1476121, 3.5, 2.7715354, 0.5849652, 3.5, 2.9418564, 2.9418564, 3.5, 0.5849652, 2.7715354, 3.5, 1.1476121)

[sub_resource type="Gradient" id="Gradient_x8boj"]
offsets = PackedFloat32Array(0, 0.7358491, 1)
colors = PackedColorArray(1, 0, 0, 1, 0.8117647, 0.3647059, 0, 0.6627451, 0.18039216, 0.18039216, 0.18039216, 0)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_rejde"]
gradient = SubResource("Gradient_x8boj")

[sub_resource type="Curve" id="Curve_q3654"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.50757575, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_30vyx"]
curve = SubResource("Curve_q3654")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_ntkjg"]
direction = Vector3(0, 0, 0)
initial_velocity_min = 15.0
initial_velocity_max = 15.0
gravity = Vector3(0, -50, 0)
scale_min = 0.5
scale_max = 0.5
scale_curve = SubResource("CurveTexture_30vyx")
color_ramp = SubResource("GradientTexture1D_rejde")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_5faqd"]
transparency = 1
shading_mode = 0
vertex_color_use_as_albedo = true

[sub_resource type="SphereMesh" id="SphereMesh_56dme"]
material = SubResource("StandardMaterial3D_5faqd")

[node name="FlameVFX" type="Node3D"]
script = ExtResource("1_x8boj")

[node name="FlameHitbox" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.6885657, 0)
monitorable = false
script = ExtResource("2_rejde")

[node name="MeshInstance3D" type="MeshInstance3D" parent="FlameHitbox"]
transform = Transform3D(2, 0, 0, 0, -0.024333192, -0.9995373, 0, 0.79962987, -0.030416489, 0.21077967, 0, 2.698709)
visible = false
mesh = SubResource("CylinderMesh_rejde")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="FlameHitbox"]
transform = Transform3D(2, 0, 0, 0, -0.030416489, -0.9995373, 0, 0.9995373, -0.030416489, 0.21077967, 0, 2.7041407)
shape = SubResource("ConvexPolygonShape3D_rejde")

[node name="ResidualTimer" type="Timer" parent="FlameHitbox"]

[node name="Particles" type="GPUParticles3D" parent="."]
amount = 2500
lifetime = 0.85
process_material = SubResource("ParticleProcessMaterial_ntkjg")
draw_pass_1 = SubResource("SphereMesh_56dme")

[connection signal="timeout" from="FlameHitbox/ResidualTimer" to="." method="_on_timer_timeout"]
